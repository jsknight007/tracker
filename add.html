<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Quick Log</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 500px; margin: 0 auto; padding: 3rem 1.5rem; background: #f0f2f5; }
    .container { background: white; padding: 1.5rem; border-radius: 28px; box-shadow: 0 15px 35px rgba(0,0,0,0.07); text-align: center; }
    h1 { margin-bottom: 2rem; color: #1a73e8; font-size: 1.1rem; letter-spacing: 1.5px; font-weight: 800; }
    
    .input-group { display: flex; gap: 10px; margin-bottom: 1.5rem; }
    input { 
      flex: 1; padding: 1.1rem; border: 2px solid #e4e6eb; border-radius: 16px; 
      font-size: 1.1rem; outline: none; min-width: 0; background: #f9f9f9;
    }
    input:focus { border-color: #1a73e8; background: white; }
    
    button#submitBtn { 
      width: 60px; height: 60px; background: #1a73e8; color: white; 
      border: none; border-radius: 16px; cursor: pointer; font-size: 1.5rem; 
      flex-shrink: 0; display: flex; align-items: center; justify-content: center;
    }
    button:active { transform: scale(0.92); background: #1557b0; }

    .chips { margin-bottom: 2rem; display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; }
    .chip { padding: 10px 16px; background: #e8f0fe; border-radius: 12px; font-size: 0.85rem; color: #1967d2; cursor: pointer; font-weight: 600; }
    .chip:active { background: #d2e3fc; }

    #status { margin: 1rem 0; padding: 12px; border-radius: 12px; font-size: 0.9rem; font-weight: 600; display: none; }
    .success { background: #e6f4ea; color: #137333; display: block !important; }
    .sending { background: #e8f0fe; color: #1967d2; display: block !important; }

    .undo-link { color: #c5221f; font-size: 0.8rem; text-decoration: none; font-weight: 600; cursor: pointer; margin-top: 2rem; display: inline-block; opacity: 0.6; }
  </style>
</head>
<body>

<div class="container">
  <h1>QUICK LOG</h1>
  
  <div class="input-group">
    <input type="text" id="cmd" placeholder="Store 0.00 Card" autocomplete="off" spellcheck="false">
    <button id="submitBtn" onclick="send()">ðŸš€</button>
  </div>

  <div class="chips">
    <span class="chip" onclick="add('Citi')">Citi</span>
    <span class="chip" onclick="add('Discover')">Discover</span>
    <span class="chip" onclick="add('Costco')">Costco</span>
    <span class="chip" onclick="add('GreenState')">GreenState</span>
    <span class="chip" onclick="add('Yesterday')">Yesterday</span>
  </div>

  <div id="status"></div>
  <div class="undo-link" onclick="undo()">Mistake? Delete Last Entry</div>
</div>

<script>
  // HARDCODED URL - PASTE YOUR SCRIPT URL BETWEEN THE QUOTES BELOW
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxy2OhLXzjmz1JJLU6RgCzKUP78WL4jJ29tQNX6l3AhgIousJKZ7WwbAvXrpiZkHOKc/exec"; 
  const input = document.getElementById('cmd');

  function add(val) {
    input.value += (input.value ? " " : "") + val;
    input.focus();
  }

  async function send() {
    const val = input.value.trim();
    if (!val) return;
    
    msg("Logging...", "sending");
    try {
      await fetch(WEB_APP_URL, {
        method: "POST", mode: "no-cors",
        body: new URLSearchParams({ 'command': val })
      });
      msg("âœ… Saved", "success");
      input.value = "";
    } catch (e) { alert("Connection error."); }
  }

  function msg(t, c) {
    const s = document.getElementById('status');
    s.textContent = t; s.className = c;
    if (c === 'success') setTimeout(() => s.className = '', 3000);
  }

  async function undo() {
    if (confirm("Delete last entry?")) {
      await fetch(`${WEB_APP_URL}?action=deleteLast`);
      msg("ðŸ—‘ï¸ Deleted", "success");
    }
  }

  input.addEventListener("keypress", (e) => { if (e.key === "Enter") send(); });
</script>

</body>
</html>
